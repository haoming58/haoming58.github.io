<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} - {{ site.title }}</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        :root {
            --bg:#ffffff; --text:#2c3e50; --muted:#586069; --card:#ffffff; --border:#e1e4e8;
            --primary:#0366d6; --primary-weak:#f1f8ff; --alt-bg:#f8f9fa; --alt-bg-2:#e9ecef;
            --shadow:0 1px 3px rgba(0,0,0,0.1); --shadow-strong:0 4px 12px rgba(0,0,0,0.15);
        }
        [data-theme="dark"]{
            --bg:#0d1117; --text:#c9d1d9; --muted:#8b949e; --card:#161b22; --border:#30363d;
            --primary:#58a6ff; --primary-weak:#0d419d33; --alt-bg:#0d1117; --alt-bg-2:#161b22;
            --shadow:0 1px 3px rgba(0,0,0,0.5); --shadow-strong:0 4px 12px rgba(0,0,0,0.6);
        }
        body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','PingFang SC','Hiragino Sans GB','Microsoft YaHei','Helvetica Neue',Helvetica,Arial,sans-serif; line-height:1.6; color:var(--text); background:var(--bg); font-size:16px; }

        .navbar{ position:fixed; top:0; width:100%; background:var(--bg); border-bottom:1px solid var(--border); box-shadow:var(--shadow); z-index:1000; padding:0; }
        .nav-container{ max-width:1200px; margin:0 auto; display:flex; justify-content:space-between; align-items:center; padding:0 2rem; height:60px; }
        .logo{ font-size:1.5rem; font-weight:600; color:var(--text); text-decoration:none; }
        .nav-right{ display:flex; gap:1rem; align-items:center; }
        .nav-links{ display:flex; list-style:none; gap:2rem; }
        .nav-links a{ text-decoration:none; color:var(--muted); font-weight:500; padding:0.5rem 1rem; border-radius:6px; transition:all .2s ease; }
        .nav-links a:hover{ color:var(--text); background:#f6f8fa; }
        [data-theme="dark"] .nav-links a:hover{ background:#161b22; }
        .nav-links a.active{ color:var(--primary); background:var(--primary-weak); }
        .theme-toggle{ appearance:none; border:1px solid var(--border); background:var(--card); color:var(--muted); padding:0.35rem .75rem; border-radius:6px; cursor:pointer; transition:all .2s ease; font-size:.9rem; }
        .theme-toggle:hover{ color:var(--text); border-color:var(--primary); }

        .main-container{ display:flex; margin-top:60px; min-height:calc(100vh - 60px); }
        .sidebar{ width:280px; background:var(--alt-bg); border-right:1px solid var(--border); padding:2rem 0; position:fixed; height:calc(100vh - 60px); overflow-y:auto; }
        .sidebar-content{ padding:0 1.5rem; }
        .sidebar-title{ font-size:1.2rem; font-weight:600; color:var(--text); margin-bottom:1.5rem; padding-bottom:.5rem; border-bottom:2px solid var(--primary); }
        .toc{ list-style:none; }
        .toc-link{ display:block; padding:.5rem .75rem; color:var(--muted); text-decoration:none; border-radius:6px; transition:all .2s ease; font-size:.95rem; }
        .toc-link:hover{ color:var(--text); background:#e1e4e833; }
        .toc-link.active{ color:var(--primary); background:var(--primary-weak); font-weight:500; }
        .toc-subitem{ margin-left:1rem; margin-top:.25rem; }
        .toc-subitem .toc-link{ font-size:.9rem; padding:.25rem .75rem; }

        .content-area{ flex:1; margin-left:280px; padding:2rem 3rem; max-width:calc(100% - 280px); }
        .page-header{ margin-bottom:3rem; padding-bottom:2rem; border-bottom:1px solid var(--border); }
        .page-title{ font-size:2.5rem; font-weight:700; color:var(--text); margin-bottom:1rem; }
        .page-subtitle{ font-size:1.2rem; color:var(--muted); line-height:1.6; }

        .blog-item{ padding:2rem 0; border-bottom:1px solid var(--border); }
        .blog-item:last-child{ border-bottom:none; }
        .blog-meta{ display:flex; align-items:center; gap:1rem; margin-bottom:1rem; font-size:.9rem; color:#6c757d; }
        .blog-date{ background:var(--primary-weak); color:var(--primary); padding:.25rem .75rem; border-radius:20px; font-weight:500; }
        .blog-category{ background:#f6f8fa; color:var(--muted); padding:.25rem .75rem; border-radius:20px; }
        .blog-title{ font-size:1.5rem; font-weight:600; margin-bottom:1rem; color:var(--text); }
        .blog-title a{ color:inherit; text-decoration:none; }
        .blog-title a:hover{ color:var(--primary); }
        .blog-excerpt{ color:var(--muted); line-height:1.7; margin-bottom:1.5rem; }
        .blog-tag{ background:#f6f8fa; color:var(--muted); padding:.25rem .75rem; border-radius:20px; font-size:.85rem; border:1px solid var(--border); }

        .button{ display:inline-block; padding:.5rem 1rem; border-radius:6px; text-decoration:none; font-weight:500; transition:all .2s ease; }
        .button-primary{ background:var(--primary); color:#fff; }
        .button-primary:hover{ filter:brightness(.95); }

        .pagination{ display:flex; justify-content:center; align-items:center; gap:1rem; margin-top:3rem; }
        .pagination a{ padding:.5rem 1rem; border:1px solid var(--border); border-radius:6px; color:var(--muted); text-decoration:none; transition:all .2s ease; }
        .pagination a:hover{ background:#f6f8fa; border-color:var(--primary); color:var(--primary); }
        .pagination .current{ background:var(--primary); color:#fff; border-color:var(--primary); padding:.5rem 1rem; border-radius:6px; }

        @media (max-width:1024px){ .sidebar{ width:240px; } .content-area{ margin-left:240px; max-width:calc(100% - 240px); padding:2rem; } }
        @media (max-width:768px){ .nav-container{ flex-direction:column; height:auto; padding:1rem 2rem; } .nav-links{ gap:1rem; margin-top:1rem; } .sidebar{ display:none; } .content-area{ margin-left:0; max-width:100%; padding:1.5rem; } .page-title{ font-size:2rem; } }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="logo">{{ site.title }}</a>
            <div class="nav-right">
            <ul class="nav-links">
                <li><a href="/">主页</a></li>
                <li><a href="/about">个人介绍</a></li>
                <li><a href="/blog" class="active">学习博客</a></li>
            </ul>
                <button id="theme-toggle" class="theme-toggle" aria-label="切换主题">🌙 深色</button>
            </div>
        </div>
    </nav>

    <!-- 主要内容区域 -->
    <div class="main-container">
        <!-- 左侧目录 -->
        <aside class="sidebar">
            <div class="sidebar-content">
                <h3 class="sidebar-title">目录导航</h3>
                <ul class="toc">
                    <li class="toc-item">
                        <a href="#recent" class="toc-link active">最新文章</a>
                    </li>
                    <li class="toc-item">
                        <a href="#frontend" class="toc-link">前端开发</a>
                        <ul class="toc-subitem">
                            <li><a href="#react" class="toc-link">React</a></li>
                            <li><a href="#vue" class="toc-link">Vue</a></li>
                            <li><a href="#typescript" class="toc-link">TypeScript</a></li>
                        </ul>
                    </li>
                    <li class="toc-item">
                        <a href="#backend" class="toc-link">后端开发</a>
                        <ul class="toc-subitem">
                            <li><a href="#nodejs" class="toc-link">Node.js</a></li>
                            <li><a href="#python" class="toc-link">Python</a></li>
                            <li><a href="#database" class="toc-link">数据库</a></li>
                        </ul>
                    </li>
                    <li class="toc-item">
                        <a href="#devops" class="toc-link">DevOps</a>
                        <ul class="toc-subitem">
                            <li><a href="#docker" class="toc-link">Docker</a></li>
                            <li><a href="#kubernetes" class="toc-link">Kubernetes</a></li>
                            <li><a href="#ci-cd" class="toc-link">CI/CD</a></li>
                        </ul>
                    </li>
                    <li class="toc-item">
                        <a href="#learning" class="toc-link">学习笔记</a>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- 右侧内容区域 -->
        <main class="content-area">
            <header class="page-header">
                <h1 class="page-title">{{ page.title }}</h1>
                <p class="page-subtitle">{{ page.subtitle | default: "分享我的技术学习心得、项目经验和生活感悟" }}</p>
            </header>

            <!-- 博客内容 -->
            <div class="blog-content">
                {{ content }}
            </div>

            <!-- 博客列表 -->
            <section class="blog-list">
                <h2 id="recent">最新文章</h2>
                {% for post in site.posts limit:10 %}
                <article class="blog-item">
                    <div class="blog-meta">
                        <span class="blog-date">{{ post.date | date: "%Y年%m月%d日" }}</span>
                        {% if post.category %}
                        <span class="blog-category">{{ post.category }}</span>
                        {% endif %}
                    </div>
                    <h3 class="blog-title">
                        <a href="{{ post.url }}">{{ post.title }}</a>
                    </h3>
                    <p class="blog-excerpt">{{ post.excerpt | default: post.content | strip_html | truncate: 200 }}</p>
                    {% if post.tags %}
                    <div class="blog-tags">
                        {% for tag in post.tags %}
                        <span class="blog-tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                    <a href="{{ post.url }}" class="button button-primary">阅读全文 →</a>
                </article>
                {% endfor %}
            </section>

            <!-- 分页 -->
            <div class="pagination">
                {% if paginator.previous_page %}
                <a href="{{ paginator.previous_page_path }}">← 上一页</a>
                {% endif %}
                
                <span class="current">第 {{ paginator.page }} 页，共 {{ paginator.total_pages }} 页</span>
                
                {% if paginator.next_page %}
                <a href="{{ paginator.next_page_path }}">下一页 →</a>
                {% endif %}
            </div>
        </main>
    </div>

    <!-- 页脚 -->
    <footer style="background: var(--alt-bg); color: var(--muted); text-align: center; padding: 2rem 0; border-top: 1px solid var(--border); margin-top: 3rem;">
        <p>&copy; {{ site.time | date: "%Y" }} {{ site.title }}. 保留所有权利。</p>
    </footer>

    <script>
        (function(){
            const root=document.documentElement, key='theme-preference';
            const prefersDark=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;
            const saved=localStorage.getItem(key); const current=saved?saved:(prefersDark?'dark':'light');
            if(current==='dark') root.setAttribute('data-theme','dark');
            const btn=document.getElementById('theme-toggle');
            const setLabel=()=>{ const isDark=root.getAttribute('data-theme')==='dark'; btn.textContent=isDark?'☀️ 浅色':'🌙 深色'; btn.setAttribute('aria-pressed', String(isDark)); };
            setLabel();
            btn.addEventListener('click', function(){ const isDark=root.getAttribute('data-theme')==='dark'; if(isDark){ root.removeAttribute('data-theme'); localStorage.setItem(key,'light'); } else { root.setAttribute('data-theme','dark'); localStorage.setItem(key,'dark'); } setLabel(); });
        })();
    </script>
</body>
</html>
